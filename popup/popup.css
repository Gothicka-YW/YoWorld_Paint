/* --- Sales Boards input cell improvements --- */
.grid .cell {
  display: flex;
  flex-direction: column;
  gap: 6px;
  background: #faf7f7;
  border-radius: 10px;
  box-shadow: 0 1px 2px rgba(126,18,18,0.04);
  padding: 10px 8px 8px 8px;
  border: 1px solid #f0eaea;
  margin-bottom: 2px;
}
.grid .cell input[data-role="img-url"] {
  border-radius: 7px 7px 0 0;
  border-bottom: none;
  background: #fff;
}
.grid .cell input[data-role="price"] {
  border-radius: 0 0 7px 7px;
  border-top: 1px solid #f0eaea;
  background: #f8f3f3;
  font-size: 13px;
  color: #7e1212;
  font-weight: bold;
  margin-bottom: 0;
}
.price-stack{ position:relative; display:flex; flex-direction:column; }
.price-stack .char-count{ position:absolute; right:6px; bottom:4px; font-size:10px; color:#9b4a4a; opacity:.75; pointer-events:none; }
.price-stack input{ padding-right:46px !important; }
.price-stack .char-count.warn{ color:#b32626; font-weight:600; }
.grid .cell input[data-role] {
  margin: 0;
  box-shadow: none;
  border-width: 1px;
  border-style: solid;
  border-color: #e5dada;
  padding: 7px 10px;
  font-size: 14px;
  transition: border-color .15s, box-shadow .15s;
}
.grid .cell input[data-role]:focus {
  border-color: #7e1212;
  box-shadow: 0 0 0 2px #f3d6d6;
}
.sales-preview .price-wrap {
  text-align: center;
  min-height: 1.5em;
  line-height: 1.5;
  font-size: 15px;
  color: #7e1212;
  font-weight: normal;
  margin-bottom: 2px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

:root{
  --bg: #4b0c0c;
  --panel-bg: #fff;
  --text: #222;
  --pill-border: #a23b3b;
  --pill-active: #7a1414;
  --pill-text: #fff;
  --accent: #7a1414;
  --muted: #6b6b6b;
}

* { box-sizing: border-box; }
html, body { margin:0; padding:0; }
body { width: 450px; min-height: 560px; background: var(--panel-bg); color: var(--text); }

.app-header{
  background: var(--bg);
  color:#fff; font-weight:700; text-align:center;
  padding:10px 8px; font-size:18px;
}

/* Pill tabs */
nav.tabs{ position:relative; display:flex; align-items:flex-end; gap:10px; padding:8px; background: var(--bg); }
nav.tabs::after{ content:''; position:absolute; left:8px; right:8px; bottom:6px; height:2px; background: var(--pill-border); opacity:.85; }
nav.tabs .tab{
  appearance:none; border:2px solid var(--pill-border);
  border-radius:12px; padding:7px 14px; min-height:34px;
  background:transparent; color:#fff; font-weight:600; cursor:pointer;
  line-height:1.2; transition:background .15s ease, color .15s ease, box-shadow .15s;
}
nav.tabs .tab:hover{ box-shadow: inset 0 0 0 9999px rgba(255,255,255,.06); }
nav.tabs .tab.is-active{ background: var(--pill-active); color: var(--pill-text); }

/* Panels */
#panels{ padding:8px; }
.panel{ display:none; }
.panel.is-active{ display:block; }

/* Home */
.row.switch{ display:flex; align-items:center; gap:12px; margin:8px 0 12px; }

.info-link{ margin-left:auto; color:#6a87c9; text-decoration:none; }
.info-link:hover{ text-decoration:underline; }

.preview-card{ margin:8px 0; display:flex; justify-content:center; }
.preview{
  width:390px; height:260px; border-radius:8px;
  background: radial-gradient(ellipse at center, #8a0f0f 0%, #2b0000 100%);
  box-shadow: inset 0 0 0 2px rgba(0,0,0,.25);
}
.input-row{ margin:10px 0; display:grid; grid-template-columns: 1fr auto; gap:8px; }
.input{ width:100%; border:1px solid #cfcfcf; border-radius:6px; padding:8px; outline:none; }
.input:focus{ border-color:#9bb2f5; box-shadow: 0 0 0 3px rgba(142,169,255,.25); }

.btn{ border:1px solid #cfcfcf; background:#f4f4f4; border-radius:8px; padding:8px 14px; cursor:pointer; }
.btn:hover{ filter:brightness(.98); }
.btn-ghost{ background:transparent; }
.btn-primary{ background: var(--accent); border-color: var(--accent); color:#fff; }
.btn-primary:hover{ filter:brightness(.95); }

/* Subtle secondary button */
.btn-secondary{ background:#fafafa; border-color:#e6e6e6; color: var(--red-accent); text-decoration:none; }
.btn-secondary:hover{ background:#f2f2f2; filter:brightness(.99); }
.btn-sm{ padding:6px 10px; font-size:12px; border-radius:8px; }

.note{ color:#777; font-size:12px; margin:4px 2px; }

/* Sales Boards */
.grid{ display:grid; grid-template-columns: 1fr; gap:8px; }
.grid .cell{ display:grid; grid-template-columns: 1fr 1fr; gap:8px; }
.controls-row{ display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin:10px 0; }
.controls-row .spacer{ flex:1; }
.sales-preview{ display:grid; grid-template-columns: repeat(3, 1fr); gap:10px; }
.sales-preview .tile{
  display:flex;
  flex-direction:column;
  border-radius: 8px;
  background: #fff;
  border: 1px solid #d9d9d9;
  overflow:hidden;
  position:relative;
}
.sales-preview.dynamic{ width:390px; height:260px; position:relative; margin:8px auto; box-shadow:0 0 0 1px #cfc3c3; background:#fff; }
.sales-preview.dynamic{ will-change:transform; }
.sales-preview-spacer{ pointer-events:none; }
#panel-sales { overflow-x:hidden; }
.sales-preview.dynamic .tile{ box-shadow:0 0 0 1px rgba(0,0,0,.05); }
.sales-preview.dynamic .tile .img-wrap{ overflow:hidden; }
.sales-preview.dynamic .tile .img-wrap img{ width:100%; height:100%; object-fit:cover; }
.sales-preview .tile.drag-over{ outline:2px dashed #7e1212; outline-offset:-2px; }
.sales-preview .tile .img-wrap{ cursor:pointer; }
.sales-preview .tile .img-wrap::after{ content:'Click or Drop'; position:absolute; left:0; right:0; top:0; bottom:0; display:flex; align-items:center; justify-content:center; font-size:11px; font-weight:600; color:#7e1212; opacity:0; transition:opacity .15s; background:linear-gradient(to bottom,rgba(255,255,255,.0),rgba(255,255,255,.55)); pointer-events:none; }
.sales-preview .tile .img-wrap:hover::after{ opacity:1; }

/* Layout selector + footer lines */
.layout-row{ display:flex; flex-wrap:wrap; gap:12px; margin:4px 0 6px; align-items:flex-start; }
#panel-sales .layout-row label select{ font-size:12px; }
#footer-inputs input{ font-size:12px; padding:6px 8px; }
.price-wrap.dual{ line-height:1.1; min-height:2.3em; display:flex; flex-direction:column; justify-content:center; }
.price-wrap.dual span{ display:block; max-width:100%; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

/* Resources */
.content-pad{ padding:6px 2px; }
.links{ margin:4px 0 12px 20px; }
.links li{ margin:6px 0; }
.uploader-row{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
.rule{ border:none; border-top:1px solid rgba(0,0,0,.15); margin:12px 0; }
.meta{ color:#555; font-size:12px; }
.donate{ text-align:center; margin-top:10px; }
.bmc{ display:inline-block; padding:8px 14px; background:#FFDD00; color:#000; font-weight:700; border-radius:8px; text-decoration:none; box-shadow:0 1px 0 rgba(0,0,0,.18), 0 2px 6px rgba(0,0,0,.12); }
.bmc:hover{ filter:brightness(.95); }
.status{ margin-left:6px; opacity:.8; }


/* === Red/White YoAI-style theme with pill tabs === */
:root{
  --red-700: #6f0f0f;
  --red-800: #520808;
  --red-900: #3a0505;
  --red-accent: #8a1414;
  --red-border: #b33a3a;
  --panel-bg: #ffffff;
  --text: #1f1f1f;
  --muted: #666;
  --pill-border: var(--red-border);
  --pill-active-bg: #ffffff;
  --pill-inactive-bg: transparent;
  --pill-text: #ffffff;
  --pill-active-text: var(--red-accent);
}

/* Frame */
body{ background:#ececec; }
.app-shell{
  width: 450px; min-height: 560px;
  margin: 0 auto;
  background: var(--panel-bg);
  border: 2px solid var(--red-border);
  border-radius: 16px;
  box-shadow: 0 6px 18px rgba(0,0,0,.18);
  overflow: hidden;
}

/* Header */
.app-header{
  background: linear-gradient(180deg,var(--red-700),var(--red-900));
  color:#fff;
  font-family: "Cinzel Decorative", serif;
  font-weight:700;
  text-shadow: 0 1px 0 rgba(0,0,0,.35);
  letter-spacing:.3px;
  text-align:center;
  padding:12px 10px;
  font-size:20px;
  border-bottom: 1px solid rgba(255,255,255,.08);
}

/* Pill tabs (two-line capable, Spectral SC) */
nav.tabs{ background: linear-gradient(180deg,var(--red-800),var(--red-900)); padding:10px 10px 12px; display:flex; gap:10px; align-items:flex-end; position:relative; }
nav.tabs::after{ content:''; position:absolute; left:10px; right:10px; bottom:8px; height:2px; background: var(--red-border); opacity:.8; }
nav.tabs .tab{
  font-family: "Spectral SC", serif;
  font-weight:600;
  letter-spacing:.15px;
  color:#fff;
  background: var(--pill-inactive-bg);
  border: 2px solid var(--pill-border);
  border-radius: 12px;
  min-height: 40px;
  padding: 8px 14px;
  line-height:1.15;
  white-space: normal;
  max-width: 150px;
  text-align:center;
  cursor:pointer;
  transition: background .15s ease, color .15s ease, box-shadow .15s ease;
}
nav.tabs .tab:hover{ box-shadow: inset 0 0 0 9999px rgba(255,255,255,.06); }
nav.tabs .tab.is-active{
  background: var(--pill-active-bg);
  color: var(--pill-active-text);
  box-shadow: 0 1px 0 rgba(0,0,0,.12);
}

/* Panels */
#panels{ padding:12px 12px 16px; }
.panel{ display:none; color: var(--text); }
.panel.is-active{ display:block; }

/* Home */
.row.switch{ display:flex; align-items:center; gap:12px; margin:8px 0 12px; }

.info-link{ margin-left:auto; color:#6a87c9; text-decoration:none; }
.info-link:hover{ text-decoration:underline; }

.preview-card{ margin:8px 0; display:flex; justify-content:center; }
.preview{
  width:390px; height:260px; border-radius:8px;
  background: radial-gradient(ellipse at center, #8a0f0f 0%, #2b0000 100%);
  box-shadow: inset 0 0 0 2px rgba(0,0,0,.25);
}
.input-row{ margin:12px 0; display:grid; grid-template-columns: 1fr auto; gap:10px; }
.input{ width:100%; border:1px solid #cfcfcf; border-radius:8px; padding:10px 12px; outline:none; font: inherit; }
.input:focus{ border-color:#9bb2f5; box-shadow: 0 0 0 3px rgba(142,169,255,.25); }

.btn{ border:1px solid #cfcfcf; background:#f6f6f6; border-radius:10px; padding:10px 14px; cursor:pointer; font:inherit; }
.btn:hover{ filter:brightness(.98); }
.btn-ghost{ background:transparent; }
.btn-primary{ background: var(--red-accent); border-color: var(--red-accent); color:#fff; }
.btn-primary:hover{ filter:brightness(.95); }

.note{ color:var(--muted); font-size:12px; margin:4px 2px; }

/* Sales */
.grid{ display:grid; grid-template-columns: 1fr; gap:10px; }
.grid .cell{ display:grid; grid-template-columns: 1fr 1fr; gap:10px; }
.controls-row{ display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin:12px 0; }
.controls-row .spacer{ flex:1; }
.sales-preview{ display:grid; grid-template-columns: repeat(3, 1fr); gap:10px; }
.sales-preview .tile{
  display:flex;
  flex-direction:column;
  border-radius: 8px;
  background: #fff;
  border: 1px solid #d9d9d9;
  overflow:hidden;
  position:relative;
}

/* Resources */
.content-pad{ padding:6px 2px; }
.links{ margin:4px 0 12px 20px; }
.links li{ margin:6px 0; }
.uploader-row{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
.rule{ border:none; border-top:1px solid rgba(0,0,0,.15); margin:12px 0; }
.meta{ color:#555; font-size:12px; }
.donate{ text-align:center; margin-top:10px; }
.bmc{ display:inline-block; padding:8px 14px; background:#FFDD00; color:#000; font-weight:700; border-radius:8px; text-decoration:none; box-shadow:0 1px 0 rgba(0,0,0,.18), 0 2px 6px rgba(0,0,0,.12); }
.bmc:hover{ filter:brightness(.95); }
.status{ margin-left:6px; opacity:.8; }


/* FAQ formatting */
.faq h3{ font-family:"Spectral SC", serif; font-weight:600; margin:10px 0 6px; color: var(--red-accent); }
.faq ol{ padding-left: 22px; margin: 6px 0 10px; }
.faq ul{ padding-left: 20px; margin: 6px 0 10px; }
.faq li{ margin: 6px 0; }
.faq code{ background:#f7f7f7; border:1px solid #ececec; border-radius:5px; padding:1px 4px; }
.faq .tip{ display:flex; gap:10px; align-items:flex-start; background:#fff6d6; border:1px solid #f1e2a9; border-radius:10px; padding:10px 12px; margin-top:12px; }
.faq .tip .star{ font-size:18px; line-height:18px; }

/* --- Anti-shift: keep layout stable across tabs --- */
.tabs-content, .tab-panel, .tab-panel .panel-body {
  overflow-y: auto;
  scrollbar-gutter: stable both-edges;
}
/* Ensure all tab panels share the same min height to avoid vertical jumps */
.tab-panel {
  min-height: 520px; /* adjust if your popup is taller/shorter */
}

/* --- Anti-shift v2: make scroll space consistent & prevent width jump --- */
#panels { overflow-y: auto; scrollbar-gutter: stable both-edges; }
.panel  { overflow-y: auto; scrollbar-gutter: stable both-edges; min-height: 480px; }

.sales-preview .tile{
  display:flex;
  flex-direction:column;
  border-radius: 8px;
  background: #fff;
  border: 1px solid #d9d9d9;
  overflow:hidden;
  position:relative;
}
.sales-cap{ position:absolute; left:6px; right:6px; bottom:6px; color:#fff; text-align:center; text-shadow:0 1px 2px rgba(0,0,0,.8); pointer-events:none; }


/* Sales Boards layout tuning */
.sales-preview{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(2, 1fr);
  gap: 6px;
  width: 100%;
  height: 260px;
  box-sizing: border-box;
}
.sales-preview .tile{
  display:flex;
  flex-direction:column;
  border-radius: 8px;
  background: #fff;
  border: 1px solid #d9d9d9;
  overflow:hidden;
  position:relative;
}
/* Maximize image area in grid tile */
.sales-preview .tile .img-wrap{
  flex: 1 1 auto;
  position: relative;
  background: #fff;
  min-height: 90px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.sales-preview .tile .img-wrap img{
  display: block;
  max-width: 100%;
  max-height: 100%;
  margin: 0 auto;
  object-fit: contain;
}
#panel-sales .btn.btn--primary{
  background: #6e0d0d;
  color: #fff;
  border-color: #550909;
}
#panel-sales .btn.btn--primary:hover{
  background:#7f0f0f;
}

.btn-red{background:#6e0d0d;color:#fff;border:1px solid #540a0a}.btn-red:hover{filter:brightness(1.05)}

/* === Slider Toggle (Enable Redirect) === */
.row.switch { display:flex; align-items:center; gap:12px; }  /* safe duplicate */

.toggle {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  user-select: none;
}

/* hide native checkbox (accessible) */
.toggle input {
  position: absolute;
  opacity: 0;
  width: 0;
  height: 0;
}

/* track */
.toggle .slider {
  position: relative;
  width: 44px;
  height: 24px;
  background: #cfd3d8;               /* off color */
  border-radius: 999px;
  transition: background .2s ease;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.06);
}

/* knob */
.toggle .slider::before {
  content: "";
  position: absolute;
  width: 20px;
  height: 20px;
  left: 2px;
  top: 2px;
  background: #fff;
  border-radius: 50%;
  box-shadow: 0 1px 2px rgba(0,0,0,.25);
  transition: transform .2s ease;
}

/* on state */
.toggle input:checked + .slider {
  background: var(--red-accent);      /* theme color */
}
.toggle input:checked + .slider::before {
  transform: translateX(20px);
}

/* keyboard focus */
.toggle input:focus-visible + .slider {
  outline: 2px solid #93c5fd;
  outline-offset: 2px;
}

/* disabled (optional) */
.toggle input:disabled + .slider,
.toggle input:disabled ~ .label {
  opacity: .6;
  cursor: not-allowed;
}

/* label text */
.toggle .label {
  font-weight: 500;
}

/* === FAQ: subheader sizing & typography (v2.3) === */
#panel-faq h2 {
  font-size: 1.35rem;
  line-height: 1.25;
  margin: 0.6rem 0 0.35rem;
  letter-spacing: 0.2px;
}
#panel-faq h3 {
  font-size: 1.2rem;
  line-height: 1.25;
  margin: 0.5rem 0 0.3rem;
  letter-spacing: 0.15px;
}
#panel-faq p, #panel-faq li {
  line-height: 1.4;
  margin: 0.35rem 0;
}
#panel-faq .links {
  padding-left: 1.1rem;
  margin: 0.4rem 0 0.6rem;
}
#panel-faq .links li {
  margin: 0.25rem 0;
}


/* === Resources: mirror FAQ typography === */
#panel-resources h2 {
  font-size: 1.35rem;
  line-height: 1.25;
  margin: 0.6rem 0 0.35rem;
  letter-spacing: 0.2px;
}
#panel-resources h3 {
  font-size: 1.2rem;
  line-height: 1.25;
  margin: 0.5rem 0 0.3rem;
  letter-spacing: 0.15px;
}
#panel-resources p, #panel-resources li {
  line-height: 1.4;
  margin: 0.35rem 0;
}
#panel-resources .links {
  list-style: none;
  padding-left: 0;
  margin: 0.4rem 0 0.6rem;
}
#panel-resources .links li {
  margin: 0.25rem 0;
  position: relative;
  padding-left: 1.25rem;
}
#panel-resources .links li::before {
  content: "♥";
  position: absolute;
  left: 0;
  top: 0.05rem;
  font-size: 0.95rem;
  line-height: 1;
  color: var(--red-accent, #e11d48);
}

/* Footer at bottom of popup */
.app-footer {
  margin-top: 10px;
  padding: 8px 10px 12px;
  border-top: 1px dashed rgba(0,0,0,.12);
  text-align: center;
}
.app-footer .footer-inner {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
}
.app-footer .bmc-wrap .bmc {
  display: inline-block;
  padding: 6px 10px;
  border-radius: 8px;
  background: var(--red-accent, #e11d48);
  color: #fff;
  text-decoration: none;
  font-weight: 600;
  font-size: 12px;
}
.app-footer p {
  margin: 0;
  font-size: 12px;
  opacity: .85;
}

/* Match Resources "Useful Links" heading to FAQ subheaders */
#panel-resources h3 {
  color: var(--text-strong, #111);
  font-family: inherit;
}

/* === Ensure Resources "Useful Links" heading matches FAQ subheaders === */
section#panel-faq.panel h3,
section#panel-resources.panel h3 {
  color: var(--red-accent, #e11d48);
  font-family: 'Dancing Script', cursive !important;
  font-weight: 400 !important;
  font-size: 1.7rem !important;
  letter-spacing: 0.5px;
  line-height: 1.2;
}
